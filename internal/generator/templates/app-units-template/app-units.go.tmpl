// Code generated by coattail; DO NOT EDIT.
package internal

import (
    {{if gt (len .Actions) 0}}"{{ .PackageName }}/internal/actions"{{end}}
    {{if gt (len .Receivers) 0}}"{{ .PackageName }}/internal/receivers"{{end}}
	"context"

	"github.com/nathan-fiscaletti/coattail-go/pkg/coattailtypes"
)

func (a *App) LoadUnits(ctx context.Context, local *coattailtypes.Peer) error {
    var err error

    // Register actions
    {{ range $action := .Actions }}
    err = local.RegisterAction(ctx, coattailtypes.NewAction(&actions.{{ $action.Name }}{}))
    if err != nil {
        return err
    }
    {{ end }}
    // Register receivers
    {{ range $receiver := .Receivers }}
    err = local.RegisterReceiver(ctx, coattailtypes.NewReceiver(&receivers.{{ $receiver.Name }}{}))
    if err != nil {
        return err
    }
    {{ end }}
    return nil
}
